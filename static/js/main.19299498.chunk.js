(this["webpackJsonpradioactive-game-web"]=this["webpackJsonpradioactive-game-web"]||[]).push([[0],{230:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),s=n.n(r),c=n(14),o=n.n(c),i=n(136),l=n(137);n(172);function u(){var e=Object(i.a)(["\n* {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n  outline: 0;\n}\nbody, html {\n  background: #eee;\n  font-family: 'Helvetica Neue', 'Helvetica', Arial, sans-serif;\n  text-rendering: optimizeLegibility !important;\n  -webkit-font-smoothing: antialiased !important;\n  height: 100%;\n  width: 100%;\n}\n"]);return u=function(){return e},e}Object(l.a)(u());var p=n(21),d=n(153),h=n(17),m=n(152),j=n(19),b=n.n(j),f=n(29),g=n(32),x=n(33),O=n(36),v=n(35),y=n(273),S=n(288),w=n(6),C=n(272),M=n(277),N=n(290),E=n.p+"static/media/nuclear.272c3b9e.svg",A=function(e,t){for(var n=0;n<e.length;n++){var a=e[n](t);if(""!==a)return a}return""},k=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var a=t[n],r=e[a].validation,s=e[a].value;e[a].error=A(r,s)}return e},I=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){if(""!==e[t[n]].error)return!1}return!0},R=function(e){return e?"":"Preencha para continuar!"},D=n(141),L=n.n(D),T=n(96),W="TOKEN_KEY",G="TOKEN_EXPIRES_AT",q="PASSWORD",B=function(){return localStorage.getItem(W)},H=function(e,t){var n=Object(T.a)(e);localStorage.setItem(W,e),localStorage.setItem(q,t),localStorage.setItem(G,n.exp.toString())},P=function(){var e=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F(),e.next=3,V(t.email,t.password);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(f.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.post("/login",{email:t,password:n});case 2:a=e.sent,H(a.headers.authorization,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(T.a)(localStorage.getItem(W));return{id:parseInt(e.sub),email:e.aud,name:e.user,environment:e.environment,group:e.group,isLeader:e.isLeader,password:localStorage.getItem(q)}},_=n(142),U=n.n(_),z=L.a.create({baseURL:"https://radioactive-game.herokuapp.com"});z.interceptors.request.use(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=B())&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Q=z,J=n(69),K=function(){return Object(a.jsx)(J.a,{variant:"body2",color:"textSecondary",align:"center",children:"Copyright \xa9 "+(new Date).getFullYear()})},Y=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={fields:{name:{value:"",error:"",validation:[R]},email:{value:"",error:"",validation:[R]},password:{value:"",error:"",validation:[R]}}},e.changeValue=function(t){var n=t.target.value,a=t.target.id,r=e.state.fields;r[a].value=n,r[a].error=A(r[a].validation,n),e.setState(r)},e.handleSignUp=function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.fields,r=k(a),!I(r)){t.next=15;break}return t.prev=4,t.next=7,Q.post("/api/accounts",{name:a.name.value,email:a.email.value,number:a.password.value,password:a.password.value,environment:{id:1},isLeader:!1});case 7:e.props.history.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0);case 13:t.next=16;break;case 15:e.setState(r);case 16:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.state.fields;return Object(a.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(y.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)("img",{src:E,alt:"Logo",className:e.logo}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:this.handleSignUp,children:[Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Nome",name:"name",autoComplete:"Nome",autoFocus:!0,value:t.name.value,error:""!==t.name.error,helperText:t.name.error,onChange:this.changeValue}),Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"E-mail",name:"email",autoComplete:"email",value:t.email.value,error:""!==t.email.error,helperText:t.email.error,onChange:this.changeValue}),Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"RA",type:"text",id:"password",autoComplete:"current-password",value:t.password.value,error:""!==t.password.error,helperText:t.password.error,onChange:this.changeValue}),Object(a.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Cadastrar"})]})]}),Object(a.jsx)(N.a,{mt:8,children:Object(a.jsx)(K,{})})]})}}]),n}(r.Component),X=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},logo:{margin:e.spacing(1),width:"120px",height:"120px",backgroundColor:"transparent"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(Y),Z=n(279),$=n(278),ee=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={fields:{email:{value:"",error:"",validation:[R]},password:{value:"",error:"",validation:[R]}}},e.changeValue=function(t){var n=t.target.value,a=t.target.id,r=e.state.fields;r[a].value=n,r[a].error=A(r[a].validation,n),e.setState(r)},e.handleSignIn=function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.fields,r=k(a),!I(r)){t.next=17;break}return t.prev=4,t.next=7,V(a.email.value,a.password.value);case 7:e.props.history.push("/app"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(4),a.email.error="E-mail ou Senha inv\xe1lidos.",a.password.error="E-mail ou Senha inv\xe1lidos.",e.setState(a);case 15:t.next=18;break;case 17:e.setState(r);case 18:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.state.fields;return Object(a.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(y.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)("img",{src:E,alt:"Logo",className:e.logo}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:this.handleSignIn,children:[Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"E-mail",name:"email",autoComplete:"email",autoFocus:!0,value:t.email.value,error:""!==t.email.error,helperText:t.email.error,onChange:this.changeValue}),Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"current-password",value:t.password.value,error:""!==t.password.error,helperText:t.password.error,onChange:this.changeValue}),Object(a.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Entrar"}),Object(a.jsx)($.a,{container:!0,className:e.signup,children:Object(a.jsx)($.a,{item:!0,children:Object(a.jsx)(Z.a,{href:"#/signup",variant:"body2",children:"Cadastre-se"})})})]})]}),Object(a.jsx)(N.a,{mt:8,children:Object(a.jsx)(K,{})})]})}}]),n}(r.Component),te=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},logo:{margin:e.spacing(1),width:"120px",height:"120px",backgroundColor:"transparent"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},signup:{flexDirection:"column",textAlign:"center"}}}))(ee),ne=n(5),ae=n(38),re=n(280),se=n(281),ce=n(284),oe=n(282),ie=n(232),le=n(147),ue=n.n(le),pe=n(149),de=n.n(pe),he=n(150),me=n.n(he),je=n(283),be=n(276),fe=n(287),ge=n(294),xe=n(295),Oe=n(293),ve=n(291),ye=n(285),Se=n(286),we=n(68),Ce=n(133),Me=n(135),Ne=n(134),Ee=n(148),Ae=n.n(Ee),ke=n(77),Ie=350,Re=n(146),De=n.n(Re),Le=n(84),Te=n(85),We=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).state={message:"",messageAll:"",menuLeftOpen:!1,menuRightOpen:!1,alertOpen:!1,alert:"",environments:[],currentEnvironment:{id:F().environment,questions:[{id:0,description:"",responses:[]}],tools:[]},chatMessages:[],chatMessagesAll:[],newMessages:0,accounts1:[],accounts2:[],car1:{fromEnvironment:{id:1,name:""},toEnvironment:{id:1,name:""}},car2:{fromEnvironment:{id:1,name:""},toEnvironment:{id:1,name:""}},tool1:"",tool2:"",isLeader:F().isLeader},a.logout=function(){localStorage.removeItem(W),localStorage.removeItem(G),a.props.history.push("/")},a.handleMenu=function(){z.get("/api/environments").then((function(e){return a.setState({environments:e.data})}))},a.handleAccounts=function(){z.get("/api/accountGroups/".concat(F().group)).then((function(e){e.data.accounts.forEach((function(e){return e.color=Le.a[500]})),a.setState({accounts:e.data.accounts}),a.handleCars(1),a.handleCars(2)}))},a.handleCars=function(e){z.get("/api/transports/getByIndex/".concat(e,"/").concat(F().group)).then((function(t){var n=a.state.accounts,r=JSON.parse(JSON.stringify(n)),s={};t.data.fromEnvironment=t.data.toEnvironment,t.data.toEnvironment=void 0,s["car"+e]=t.data,s["accounts"+e]=r.filter((function(e){return e.environment.id===t.data.fromEnvironment.id}));var c="";t.data.fromEnvironment.tools.forEach((function(e){return c+=e.description+"; "})),s["tool"+e]=c.trim(),a.setState(s)}))},a.handleCurrentEnvironment=function(){z.get("/api/environments/getWithUserResponses").then((function(e){return a.setState({currentEnvironment:e.data})}))},a.handleTools=function(){z.get("/api/environments/getWithUserResponses").then((function(e){var t=a.state.currentEnvironment;t.tools=e.data.tools,a.setState(t)}))},a.handleMessages=function(){z.get("/api/chatMessages/getByEnvironmentId/".concat(a.state.currentEnvironment.id)).then((function(e){return a.setState({chatMessages:e.data})})),z.get("/api/chatMessages/getByAccountGroup").then((function(e){return a.setState({chatMessagesAll:e.data})}))},a.handleOpenLeftMenu=function(){a.setState({menuLeftOpen:!0})},a.handleCloseLeftMenu=function(){a.setState({menuLeftOpen:!1})},a.handleOpenRightMenu=function(){a.setState({menuRightOpen:!0,newMessages:0})},a.handleCloseRightMenu=function(){a.setState({menuRightOpen:!1})},a.changeMessage=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.handleSendMessage=function(e){var t=a.state,n=t.message,r=t.messageAll,s=e?"/all":"",c=e?r:n;""!==c&&z.post("/api/chatMessages"+s,{text:c}).then((function(){e?(a.setState({messageAll:""}),a.chatInputAll.current.focus()):(a.setState({message:""}),a.chatInput.current.focus())})).catch((function(e){return console.log(e)}))},a.changeResponse=function(e){var t=e.target.value,n=e.target.id.substring(9),r=a.state.currentEnvironment;r.questions[parseInt(n)].responses?r.questions[parseInt(n)].responses=[{text:t}]:r.questions[parseInt(n)].responses[0].text=t,a.setState(r)},a.changeValue=function(e){var t={};t[e.target.id]=e.target.value,a.setState(t)},a.selectAccount=function(e,t){var n=a.state["accounts"+t];n[e].color===Te.a[500]?n[e].color=Le.a[500]:n[e].color=Te.a[500],a.setState(n)},a.handleCarGo=function(){var e=Object(f.a)(b.a.mark((function e(t){var n,r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state["car"+t],r=a.state["accounts"+t].filter((function(e){return e.color===Te.a[500]})).map((function(e){return{id:e.id}})),s=a.state["tool"+t].split(";").filter((function(e){return!!e})).map((function(e){return{description:e,environment:n.toEnvironment?n.toEnvironment:0}})),0===r.length||!n.toEnvironment){e.next=17;break}return e.prev=4,e.next=7,z.post("/api/transports",{accountGroup:{id:F().group},carIndex:t,accounts:r,tools:s,toEnvironment:n.toEnvironment,fromEnvironment:n.fromEnvironment,timestamp:1202020});case 7:(c={})["tool"+t]="",c.alertOpen=!0,c.alert="Carro ".concat(t," enviado!"),a.setState(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),a.onChangeEnvironmentTo=function(e,t){var n=a.state["car"+e];n.toEnvironment=t,a.setState(n)},a.handleSendResponses=Object(f.a)(b.a.mark((function e(){var t,n,r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentEnvironment,n=t.questions,r=n.length>1?"As respostas foram salvas!":"A resposta foi salva!",s=0,c=n.filter((function(e){return!!(e.responses&&e.responses.length>0)&&e.responses[0].text.trim().length>0})),e.next=7,c.forEach((function(e){var t=e.responses[0].text.trim();z.post("/api/responses",{account:{id:F().id},text:t,question:{id:e.id}}).then((function(){c.length===++s&&a.setState({alertOpen:!0,alert:r})})).catch((function(e){console.log(e),alert("UM ERRO OCORREU! SALVE SUAS RESPOSTAS!")}))}));case 7:case"end":return e.stop()}}),e)}))),a.handleCloseAlert=function(e,t){"clickaway"!==t&&a.setState({alertOpen:!1})},a.chatInput=s.a.createRef(),a.chatInputAll=s.a.createRef(),a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(b.a.mark((function e(){var t,n,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:this.handleMenu(),this.handleCurrentEnvironment(),this.handleMessages(),this.handleAccounts(),t=De.a.over(new U.a("https://radioactive-game.herokuapp.com/gs-websocket",null,{transports:["xhr-streaming"],headers:{Authorization:"Bearer ".concat(B())}})),n=F(),t.connect({},(function(){t.subscribe("/topic/messages/".concat(n.group),(function(e){var t=a.state,n=t.currentEnvironment,r=t.newMessages,s=t.menuRightOpen,c=a.state,o=JSON.parse(e.body),i=F(),l=r;s?l=0:o.account.id!==i.id&&l++,o.environment?o.environment.id===n.id?c.chatMessages=c.chatMessages.concat(o):l=r:c.chatMessagesAll=c.chatMessagesAll.concat(o),c.newMessages=l,a.setState(c)})),t.subscribe("/topic/transport/".concat(n.group),(function(e){var t=JSON.parse(e.body),n=F();1===t.accounts.filter((function(e){return e.id===n.id})).length?P().then((function(){var e=a.state.currentEnvironment;e.id=F().environment,a.setState(e),a.handleCurrentEnvironment(),a.handleMessages()})):a.handleTools(),a.state.isLeader&&a.handleAccounts()}))}),(function(){console.log("error")}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,r=n.menuLeftOpen,c=n.menuRightOpen,o=n.environments,i=n.currentEnvironment,l=n.message,u=n.chatMessages,d=n.newMessages,h=n.accounts1,m=n.accounts2,j=n.alertOpen,b=n.car1,f=n.car2,g=n.tool1,x=n.tool2,O=n.isLeader,v=n.chatMessagesAll,w=n.messageAll,E=n.alert;return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(y.a,{}),Object(a.jsx)(re.a,{position:"absolute",className:Object(ne.a)(t.appBar,r&&t.appBarShift),children:Object(a.jsxs)(se.a,{className:t.toolbar,children:[Object(a.jsx)(oe.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleOpenLeftMenu,className:Object(ne.a)(t.menuButtonLeft,r&&t.menuButtonHidden),children:Object(a.jsx)(ue.a,{})}),Object(a.jsx)(J.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:i.name}),Object(a.jsx)(oe.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleOpenRightMenu,className:Object(ne.a)(t.menuButtonRight,c&&t.menuButtonHidden),children:Object(a.jsx)(je.a,{badgeContent:d,color:"secondary",children:Object(a.jsx)(Ae.a,{})})}),Object(a.jsx)(oe.a,{edge:"start",color:"inherit",onClick:this.logout,children:Object(a.jsx)(je.a,{color:"secondary",children:Object(a.jsx)(Ce.a,{})})})]})}),Object(a.jsxs)(ae.a,{variant:"permanent",classes:{paper:Object(ne.a)(t.drawerPaper,!r&&t.drawerPaperClose)},open:r,children:[Object(a.jsx)("div",{className:t.toolbarIcon,children:Object(a.jsx)(oe.a,{onClick:this.handleCloseLeftMenu,children:Object(a.jsx)(de.a,{})})}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(be.a,{children:Object(a.jsx)("div",{children:o.map((function(e,t){return Object(a.jsxs)(ye.a,{button:!0,children:[Object(a.jsx)(Se.a,{children:s.a.createElement(we[e.icon])}),Object(a.jsx)(fe.a,{primary:e.name})]},"menu-".concat(e.id))}))})})]}),Object(a.jsxs)(ge.a,{anchor:"right",onClose:this.handleCloseRightMenu,onOpen:this.handleOpenRightMenu,open:c,children:[Object(a.jsx)("div",{className:t.toolbarIconRight,children:Object(a.jsx)(oe.a,{onClick:this.handleCloseRightMenu,children:Object(a.jsx)(me.a,{})})}),Object(a.jsx)(ce.a,{}),Object(a.jsxs)(be.a,{children:[Object(a.jsxs)("div",{className:t.rightMenu,children:[Object(a.jsxs)("h3",{children:["Chat com que est\xe1 no(a) ",i.name," (mesmo lugar que voc\xea):"]}),Object(a.jsx)("div",{className:t.chatMessages,children:u.map((function(e,n){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:t.chatMessageAccount,children:[e.account.name,": \xa0"]}),Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text}})]},"chatMessages-".concat(e.id))}))}),Object(a.jsxs)("form",{className:t.chatForm,noValidate:!0,children:[Object(a.jsx)(S.a,{inputRef:this.chatInput,className:t.chatInput,variant:"outlined",margin:"dense",multiline:!0,inputProps:{maxLength:2048},rowsMax:4,fullWidth:!0,name:"message",type:"text",id:"message",value:l,onChange:this.changeMessage}),Object(a.jsx)(oe.a,{color:"primary","aria-label":"Enviar",onClick:function(){return e.handleSendMessage(!1)},children:Object(a.jsx)(Me.a,{})})]}),Object(a.jsx)("h3",{children:"Chat com todos:"}),Object(a.jsx)("div",{className:t.chatMessages,children:v.map((function(e,n){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:t.chatMessageAccount,children:[e.account.name,": \xa0"]}),Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text}})]},"chatMessages-".concat(e.id))}))}),Object(a.jsxs)("form",{className:t.chatForm,noValidate:!0,children:[Object(a.jsx)(S.a,{inputRef:this.chatInputAll,className:t.chatInput,variant:"outlined",margin:"dense",multiline:!0,inputProps:{maxLength:2048},rowsMax:4,fullWidth:!0,name:"messageAll",type:"text",id:"messageAll",value:w,onChange:this.changeMessage}),Object(a.jsx)(oe.a,{color:"primary","aria-label":"Enviar",onClick:function(){return e.handleSendMessage(!0)},children:Object(a.jsx)(Me.a,{})})]})]}),Object(a.jsx)(ce.a,{})]})]}),Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)("div",{className:t.appBarSpacer}),Object(a.jsxs)(C.a,{maxWidth:"lg",className:t.container,children:[Object(a.jsx)($.a,{container:!0,spacing:3,children:Object(a.jsxs)($.a,{item:!0,xs:12,children:[Object(a.jsxs)(ie.a,{className:t.paper,children:[Object(a.jsxs)("h1",{children:["Voc\xea est\xe1 no(a) ",i.name]}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:i.description}}),Object(a.jsx)(ce.a,{}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,children:[i.questions.map((function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{dangerouslySetInnerHTML:{__html:t.description}},"question-".concat(t.id)),Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"response-".concat(n),label:"Resposta",multiline:!0,type:"text",inputProps:{maxLength:1024},rowsMax:4,id:"response-".concat(n),value:0===t.responses.length?"":t.responses[0].text,onChange:e.changeResponse},"response-".concat(n))]},"div-question-".concat(t.id))})),i.questions.length>0&&Object(a.jsx)(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:this.handleSendResponses,children:"Enviar"})]}),Object(a.jsx)(xe.a,{open:j,autoHideDuration:6e3,onClose:this.handleCloseAlert,children:Object(a.jsx)(Oe.a,{onClose:this.handleCloseAlert,severity:"success",children:E})}),Object(a.jsx)(ce.a,{}),Object(a.jsx)("div",{className:t.toolsDiv,children:i.tools.map((function(e,n){return Object(a.jsx)(N.a,{component:"div",display:"inline-block",p:1,m:1,className:t.tools,children:e.description},"tool-description-".concat(e.id))}))})]}),O&&Object(a.jsxs)($.a,{justify:"space-between",container:!0,spacing:2,children:[Object(a.jsx)($.a,{item:!0,xs:6,className:t.carGrid,children:Object(a.jsxs)(ie.a,{className:t.paper,children:[Object(a.jsxs)("h3",{children:["Carro 1 est\xe1 no(a) ",b.fromEnvironment.name]}),Object(a.jsx)(ce.a,{}),h.map((function(t,n){return Object(a.jsxs)(ye.a,{button:!0,onClick:function(){return e.selectAccount(n,1)},children:[Object(a.jsx)(Se.a,{children:Object(a.jsx)(Ne.a,{style:{color:t.color}})}),Object(a.jsx)(fe.a,{primary:t.name})]},"account1-".concat(t.id))})),Object(a.jsx)(ce.a,{}),Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"tool1",label:"Ferramentas",multiline:!0,type:"text",rowsMax:8,id:"tool1",value:g,onChange:this.changeValue},"tool1"),Object(a.jsx)(ve.a,{options:o.filter((function(e){return e.id!==b.fromEnvironment.id})),fullWidth:!0,renderOption:function(e){return Object(a.jsxs)(s.a.Fragment,{children:[s.a.createElement(we[e.icon]),e.name]})},value:b.toEnvironment,onChange:function(t,n){return e.onChangeEnvironmentTo(1,n)},getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(a.jsx)(S.a,Object(p.a)(Object(p.a)({},e),{},{label:"Indo para",variant:"outlined",inputProps:Object(p.a)({},e.inputProps)}))}}),Object(a.jsx)(oe.a,{color:"primary","aria-label":"Ir",className:t.carButton,onClick:function(){return e.handleCarGo(1)},children:Object(a.jsx)(Me.a,{})})]})}),Object(a.jsx)($.a,{item:!0,xs:6,className:t.carGrid,children:Object(a.jsxs)(ie.a,{className:t.paper,children:[Object(a.jsxs)("h3",{children:["Carro 2 est\xe1 no(a) ",f.fromEnvironment.name]}),Object(a.jsx)(ce.a,{}),m.map((function(t,n){return Object(a.jsxs)(ye.a,{button:!0,onClick:function(){return e.selectAccount(n,2)},children:[Object(a.jsx)(Se.a,{children:Object(a.jsx)(Ne.a,{style:{color:t.color}})}),Object(a.jsx)(fe.a,{primary:t.name})]},"account2-".concat(t.id))})),Object(a.jsx)(ce.a,{}),Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"tool2",label:"Ferramentas",multiline:!0,type:"text",rowsMax:8,id:"tool2",value:x,onChange:this.changeValue},"tool2"),Object(a.jsx)(ve.a,{options:o.filter((function(e){return e.id!==f.fromEnvironment.id})),fullWidth:!0,renderOption:function(e){return Object(a.jsxs)(s.a.Fragment,{children:[s.a.createElement(we[e.icon]),e.name]})},value:f.toEnvironment,onChange:function(t,n){return e.onChangeEnvironmentTo(2,n)},getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(a.jsx)(S.a,Object(p.a)(Object(p.a)({},e),{},{label:"Indo para",variant:"outlined",inputProps:Object(p.a)({},e.inputProps)}))}}),Object(a.jsx)(oe.a,{color:"primary","aria-label":"Ir",className:t.carButton,onClick:function(){return e.handleCarGo(2)},children:Object(a.jsx)(Me.a,{})})]})})]})]})}),Object(a.jsx)(N.a,{pt:4,children:Object(a.jsx)(K,{})})]})]})]})}}]),n}(r.Component),Ge=Object(w.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(p.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),toolbarIconRight:Object(p.a)({display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Ie,width:"calc(100% - ".concat(Ie,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButtonLeft:{marginRight:36},menuButtonRight:{marginLeft:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:Ie,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ke.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},rightMenu:{width:Ie,marginLeft:"10px",marginRight:"10px"},chatMessages:{height:"250px",overflowY:"auto",border:"1px solid black"},chatForm:{display:"flex",flexDirection:"row"},chatInput:{alignSelf:"flex-end"},chatMessageAccount:{fontWeight:"bold"},carGrid:{marginTop:"20px"},carButton:{width:"50px",alignSelf:"flex-end"},toolsDiv:{marginTop:"15px"},tools:{backgroundColor:"#3f51b5",color:"white"}}}))(We),qe=n(83),Be=n.n(qe),He=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={ags:[]},e.handleAccountGroups=function(){z.get("/api/accountGroups").then((function(t){var n=e.state.ags;t.data.forEach((function(t){n[t.id-1]={name:t.name},e.setState(n),e.handleReport(t)}))}))},e.handleReport=function(t){z.get("/api/report/getByAccountGroupId/".concat(t.id)).then((function(n){return e.handleSetReport(t,n,"report")})),z.get("/api/report/getQuestionsByAccountGroupId/".concat(t.id)).then((function(n){return e.handleSetReport(t,n,"questions")}))},e.handleSetReport=function(t,n,a){var r=e.state.ags;r[t.id-1][a]=n.data,e.setState(r)},e.formatDate=function(e){var t=new Date(e);return Be()(t).format("DD/MM/yyyy HH:mm")},e.formatHour=function(e){var t=Math.floor(e/36e5),n=Math.floor((e-36e5*t)/6e4);return"".concat(("0"+t).slice(-2),":").concat(("0"+n).slice(-2))},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.handleAccountGroups()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.ags;return Object(a.jsx)(C.a,{maxWidth:"lg",className:t.container,children:Object(a.jsx)($.a,{container:!0,children:Object(a.jsx)($.a,{item:!0,xs:12,children:n.filter((function(e){return!!e.report})).map((function(n,r){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h2",{children:["Grupo: ",n.name]}),Object(a.jsx)("h3",{children:"Alunos: "}),Object(a.jsx)(be.a,{className:t.root,children:Object.keys(n.report.accounts).map((function(e,t){return Object(a.jsxs)(fe.a,{children:["RA ",e,": ",n.report.accounts[e]]},"ra-".concat(r,"-").concat(e))}))}),Object(a.jsx)(ce.a,{}),Object(a.jsx)("h3",{children:"Tempo: "}),Object(a.jsxs)("p",{children:["In\xedcio: ~",e.formatDate(n.report.startTime)]}),Object(a.jsxs)("p",{children:["Fim: ~",e.formatDate(n.report.endTime)]}),Object(a.jsxs)("p",{children:["Dura\xe7\xe3o: ~",e.formatHour(n.report.duration)]}),Object(a.jsx)(ce.a,{}),Object(a.jsx)("h3",{children:"Quest\xf5es: "}),Object.keys(n.questions).map((function(s,c){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h4",{children:[s,":"]}),n.questions[s].map((function(n,s){return Object(a.jsxs)("div",{children:["Q.: ",Object(a.jsx)("p",{dangerouslySetInnerHTML:{__html:n.question}}),n.responses.map((function(n,s){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:t.response,children:["R.: (",n.account,") - ",e.formatDate(n.timestamp),":"]})," ",n.response]},"response-".concat(r,"-").concat(s))}))]},"question-".concat(r,"-").concat(s))}))]},"env-".concat(r,"-").concat(c))})),Object(a.jsx)(ce.a,{}),Object(a.jsx)("h3",{children:"Mensagens: "}),Object.keys(n.report.messages).map((function(t,s){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h4",{children:[t,":"]}),n.report.messages[t].map((function(t,n){return Object(a.jsxs)("div",{children:[t.accounts," - ",e.formatDate(t.timestamp),": ",t.text]},"message-".concat(r,"-").concat(n))}))]},"env-message-".concat(r,"-").concat(s))})),Object(a.jsx)(ce.a,{}),Object(a.jsx)("h3",{children:"Movimenta\xe7\xe3o: "}),n.report.events.map((function(n,s){return Object(a.jsxs)("div",{className:t.transportDiv,children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Carro:"})," ",n.carIndex]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Saiu do(a):"})," ",n.from]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Foi para o(a):"})," ",n.to]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"As:"})," ",e.formatDate(n.timestamp)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Levou:"}),n.tools.reduce((function(e,t){return"".concat(e," ").concat(t,";")}),"")]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Quem foi:"}),n.accounts.reduce((function(e,t){return"".concat(e," ").concat(t,";")}),"")]})]},"event-".concat(r,"-").concat(s))})),Object(a.jsx)(ce.a,{className:t.dividerAG})]},"ag-".concat(r))}))})})})}}]),n}(r.Component),Pe=Object(w.a)((function(e){return{dividerAG:{height:"15px",background:"red",marginTop:"5px"},transportDiv:{border:"solid 1px black",borderRadius:"5px",marginTop:"5px",paddingLeft:"10px"},span:{fontWeight:"bold"},response:{color:"blue"}}}))(He),Ve=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={ags:[]},e.handleAccountGroups=function(){z.get("/api/accountGroups").then((function(t){var n=e.state.ags;t.data.forEach((function(t){n[t.id-1]={name:t.name,responses:[],transports:[]},e.setState(n),e.handleReport(t)}))}))},e.handleReport=function(t){z.get("/api/report/getByAccountGroupId/".concat(t.id)).then((function(n){e.handleSetReport(t,n.data,"report"),n.data.events.forEach((function(e){return e.type="transport"})),e.handleSetReport(t,n.data.events,"transports")})),z.get("/api/report/getQuestionsByAccountGroupId/".concat(t.id)).then((function(n){e.handleSetReport(t,n.data,"questions");var a=Object.keys(n.data).map((function(e,t){return n.data[e].map((function(e){return e.responses.forEach((function(t){t.question=e.question,t.type="response"})),e.responses}))})).flat().flat().sort((function(t,n){return e.compare(t,n)}));e.handleSetReport(t,a,"responses")}))},e.handleSetReport=function(t,n,a){var r=e.state.ags;r[t.id-1][a]=n,e.setState(r)},e.compare=function(e,t){return e.timestamp>t.timestamp?1:e.timestamp<t.timestamp?-1:0},e.formatDate=function(e){var t=new Date(e);return Be()(t).format("DD/MM/yyyy HH:mm")},e.formatHour=function(e){var t=Math.floor(e/36e5),n=Math.floor((e-36e5*t)/6e4);return"".concat(("0"+t).slice(-2),":").concat(("0"+n).slice(-2))},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.handleAccountGroups()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.ags;return Object(a.jsx)(C.a,{maxWidth:"lg",className:t.container,children:Object(a.jsx)($.a,{container:!0,children:Object(a.jsx)($.a,{item:!0,xs:12,children:n.filter((function(e){return!!e.report})).map((function(n,r){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h2",{children:["Grupo: ",n.name]}),Object(a.jsx)("h3",{children:"Alunos: "}),Object(a.jsx)(be.a,{className:t.root,children:Object.keys(n.report.accounts).map((function(e,t){return Object(a.jsxs)(fe.a,{children:["RA ",e,": ",n.report.accounts[e]]},"ra-".concat(r,"-").concat(e))}))}),Object(a.jsx)(ce.a,{}),Object(a.jsx)("h3",{children:"Tempo: "}),Object(a.jsxs)("p",{children:["In\xedcio: ~",e.formatDate(n.report.startTime)]}),Object(a.jsxs)("p",{children:["Fim: ~",e.formatDate(n.report.endTime)]}),Object(a.jsxs)("p",{children:["Dura\xe7\xe3o: ~",e.formatHour(n.report.duration)]}),Object(a.jsx)(ce.a,{}),Object(a.jsx)("h3",{children:"Eventos: "}),n.responses.concat(n.transports).sort((function(t,n){return e.compare(t,n)})).map((function(n,s){return Object(a.jsxs)("div",{children:["transport"===n.type&&Object(a.jsxs)("div",{className:t.transportDiv,children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Carro:"})," ",n.carIndex]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Saiu do(a):"})," ",n.from]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Foi para o(a):"})," ",n.to]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"As:"})," ",e.formatDate(n.timestamp)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Levou:"}),n.tools.reduce((function(e,t){return"".concat(e," ").concat(t,";")}),"")]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:t.span,children:"Quem foi:"}),n.accounts.reduce((function(e,t){return"".concat(e," ").concat(t,";")}),"")]})]}),"response"===n.type&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Q.: ",Object(a.jsx)("p",{dangerouslySetInnerHTML:{__html:n.question}})]}),Object(a.jsxs)("span",{className:t.response,children:["R.: (",n.account,") - ",e.formatDate(n.timestamp),":"]})," ",n.response]})]},"event-".concat(r,"-").concat(s))})),Object(a.jsx)(ce.a,{className:t.dividerAG})]},"ag-".concat(r))}))})})})}}]),n}(r.Component),Fe=Object(w.a)((function(e){return{dividerAG:{height:"15px",background:"red",marginTop:"5px"},transportDiv:{border:"solid 1px black",borderRadius:"5px",marginTop:"5px",paddingLeft:"10px"},span:{fontWeight:"bold"},response:{color:"blue"}}}))(Ve),_e=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={accounts:[],selected:[],name:""},e.handleAccounts=function(){Q.get("/api/accounts").then((function(t){return e.setState({accounts:t.data})}))},e.save=function(){var t=e.state,n=t.name,a=t.selected,r=n.trim();r&&a.length>0&&Q.post("/api/accountGroups",{name:r,accounts:a}).then((function(){e.handleAccounts(),e.setState({name:"",selected:[]})})).catch((function(e){return alert(e)}))},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.handleAccounts()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,r=n.accounts,c=n.selected,o=n.name;return Object(a.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"name",label:"Nome",type:"text",id:"name",focused:!0,value:o,onChange:function(t){return e.setState({name:t.target.value})}}),Object(a.jsx)(ve.a,{options:r.filter((function(e){return!e.accountGroup})),fullWidth:!0,renderOption:function(e){return Object(a.jsx)(s.a.Fragment,{children:"".concat(e.number," - ").concat(e.name)})},value:c,multiple:!0,onChange:function(t,n){return e.setState({selected:n})},getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(a.jsx)(S.a,Object(p.a)(Object(p.a)({},e),{},{label:"Aluno",variant:"outlined",inputProps:Object(p.a)({},e.inputProps)}))}}),Object(a.jsx)(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:this.save,children:"Salvar"}),Object(a.jsxs)("h3",{children:["Grupos: ",o]}),Object(a.jsx)("h3",{children:"Alunos:"}),c.map((function(e,t){return Object(a.jsx)(ye.a,{children:Object(a.jsx)(fe.a,{primary:"".concat(e.number," - ").concat(e.name," ").concat(0===t?"(l\xedder)":"")})})}))]})}}]),n}(r.Component),Ue=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},logo:{margin:e.spacing(1),width:"120px",height:"120px",backgroundColor:"transparent"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(_e),ze=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(a.jsx)(h.b,Object(p.a)(Object(p.a)({},n),{},{render:function(e){return null!==localStorage.getItem(W)&&(new Date).getTime()/1e3<parseInt(localStorage.getItem(G))?Object(a.jsx)(t,Object(p.a)({},e)):Object(a.jsx)(h.a,{to:{pathname:"/",state:{from:e.location}}})}}))},Qe=function(){return Object(a.jsx)(m.a,{basename:"/radioactive-game-web",children:Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{exact:!0,path:"/",component:te}),Object(a.jsx)(h.b,{path:"/signup",component:X}),Object(a.jsx)(ze,{path:"/app",component:Ge}),Object(a.jsx)(ze,{path:"/report",component:Pe}),Object(a.jsx)(ze,{path:"/reportOrdered",component:Fe}),Object(a.jsx)(ze,{path:"/accountgroup",component:Ue}),Object(a.jsx)(h.b,{path:"*",component:function(){return Object(a.jsx)("h1",{children:"Page not found"})}})]})})},Je=function(){return Object(a.jsx)(Qe,{})};o.a.render(Object(a.jsx)(Je,{}),document.getElementById("root"))}},[[230,1,2]]]);
//# sourceMappingURL=main.19299498.chunk.js.map